<div>
  @if (cartItems().length > 0) {
    <div class="flex flex-col space-y-4">
      @for (item of cartItems(); track item.id) {
        <div class="flex items-center bg-background shadow rounded-xl p-3 gap-3">
          <!-- Image produit -->
          <img
            [src]="item.product.image"
            [alt]="item.product.name"
            class="w-16 h-16 object-cover rounded-lg bg-muted flex-shrink-0"
          />

          <!-- Infos produit -->
          <div class="flex-1 min-w-0">
            <h3 class="font-medium text-sm line-clamp-1">{{ item.product.name }}</h3>
            <p class="text-muted-foreground text-xs">
              ${{ item.product.price }}
            </p>
          </div>

          <!-- Contrôles quantité -->
          <div class="flex items-center gap-2 flex-shrink-0">
            <button
              z-button
              zType="outline"
              zSize="icon"
              class="h-7 w-7 cursor-pointer"
              [disabled]="isCartLoading() || item.quantity <= 1"
              (click)="decrementQuantity(item)"
            >
              <i class="icon-minus text-xs"></i>
            </button>

            <span class="font-medium text-sm min-w-[2ch] text-center">
              {{ item.quantity }}
            </span>

            <button
              z-button
              zType="outline"
              zSize="icon"
              class="h-7 w-7 cursor-pointer"
              [disabled]="isCartLoading()"
              (click)="incrementQuantity(item)"
            >
              <i class="icon-plus text-xs"></i>
            </button>
          </div>

          <!-- Total par produit -->
          <div class="font-semibold text-sm flex-shrink-0 min-w-[4rem] text-right">
            ${{ item.subtotal.toFixed(2) }}
          </div>

          <!-- Bouton suppression -->
          <button
            z-button
            zType="destructive"
            zSize="icon"
            class="h-7 w-7 flex-shrink-0 cursor-pointer"
            [disabled]="isCartLoading()"
            (click)="removeItem(item)"
          >
            <i class="icon-trash text-xs"></i>
          </button>
        </div>
      }
    </div>

    <div class="flex justify-between items-center border-t pt-4 mt-4">
      <span class="text-lg font-medium">Total:</span>
      <span class="text-xl font-bold text-primary">
        ${{ total().toFixed(2) }}
      </span>
    </div>
  } @else {
    <div class="text-center py-8">
      <i class="icon-shopping-cart text-4xl text-muted-foreground mb-2"></i>
      <p class="text-muted-foreground">Your cart is empty.</p>
    </div>
  }

</div>
